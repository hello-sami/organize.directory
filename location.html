<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <meta name="description"
        content="Find mutual aid networks, support initiatives, and community resources by location.">

    <!-- Open Graph / Social Media -->
    <meta property="og:title" content="Find Groups by Location | The Organize Directory">
    <meta property="og:description"
        content="Find mutual aid networks, support initiatives, and community resources by location.">
    <meta property="og:image" content="https://organize.directory/preview.png">
    <meta property="og:url" content="https://organize.directory/location">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">

    <title>Find Mutual Aid Networks By Location</title>

    <!-- Styles -->
    <link rel="stylesheet" href="/fonts/fonts.css">
    <link rel="stylesheet" href="/styles.css?v=1.1.9">

    <!-- Font pre-loading and anti-flash strategies -->
    <style>
        /* Critical font loading styles */
        .wf-loading h1,
        .wf-loading h2,
        .wf-loading h3,
        .wf-loading p,
        .wf-loading li,
        .wf-loading a {
            visibility: hidden;
        }

        /* State links specific anti-layout-shift */
        .wf-loading .state-link {
            visibility: hidden;
            /* Lock dimensions during font loading to prevent layout shift */
            height: 40px;
            /* Fixed height for state links */
            display: block;
            max-width: 100%;
            overflow: hidden;
        }

        /* Lock container dimensions during loading */
        .wf-loading .states-list {
            min-height: 2150px;
            /* Approximate height to contain all states */
        }

        /* Search input remains visible even during font loading */
        .wf-loading .title-search-input {
            visibility: visible !important;
        }
    </style>

    <!-- WebFontLoader for more reliable font loading -->
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
    <script>
        // Measure critical metrics for font loading
        window.fontLoadingStart = performance.now();

        // Initialize Web Font Loader with optimal settings
        WebFont.load({
            google: {
                families: ['Saira Semi Condensed:400,500,600,700,800', 'Inter:400,500,600,700,800']
            },
            timeout: 2000, // 2 seconds timeout
            active: function () {
                // Measure font load time
                window.fontLoadingTime = performance.now() - window.fontLoadingStart;
                console.log('Fonts loaded in ' + window.fontLoadingTime + 'ms');

                // Update CSS class to show fonts
                document.documentElement.classList.remove('wf-loading');
                document.documentElement.classList.add('wf-active');
            },
            inactive: function () {
                // If fonts fail to load, still show content
                console.warn('Web Font Loader timed out after 2000ms');
                document.documentElement.classList.remove('wf-loading');
                document.documentElement.classList.add('wf-inactive');
            },
            loading: function () {
                // Mark as loading
                document.documentElement.classList.add('wf-loading');
            }
        });
    </script>

    <!-- Mobile menu script - Load with defer to ensure it runs after DOM is ready -->
    <script src="/mobile-menu.js?v=1.0.1" defer></script>

    <!-- Include the title search script -->
    <script src="/js/title-search.js" defer></script>

    <!-- Inline sidebar initialization to prevent flashing - MODIFIED to remove mobile menu code -->
    <script>
        // Immediately set the active state for location page
        function initializeBasicSidebar() {
            // Wait for DOM to be interactive
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', setActiveSidebar);
            } else {
                setActiveSidebar();
            }
        }

        function setActiveSidebar() {
            // Find the location link and make it active
            const locationLink = document.querySelector('.location-link');
            if (locationLink) {
                locationLink.classList.add('active');
                locationLink.setAttribute('aria-current', 'page');
            }

            // Removed mobile menu toggling code to avoid conflicts with mobile-menu.js
        }

        // Execute immediately
        initializeBasicSidebar();
    </script>

    <!-- Load full sidebar functionality asynchronously -->
    <script type="module">
        // Import sidebar for enhanced functionality
        import('/components/sidebar.js?v=1.0.9')
            .then(module => {
                const { checkAndInitializeSidebar } = module;
                // Initialize full sidebar 
                checkAndInitializeSidebar('location');
            })
            .catch(error => console.error('Error initializing sidebar:', error));

        // Initialize other components after DOM is loaded
        document.addEventListener('DOMContentLoaded', function () {
            import('/utils/init.js?v=1.0.1')
                .then(module => {
                    const { initializeComponents } = module;
                    initializeComponents({});
                })
                .catch(error => console.error('Error initializing components:', error));
        });
    </script>
<!-- Mobile optimizations -->
<script src="/js/mobile-optimizations.js" defer></script>
</head>

<body class="location-page">
    <div class="layout">


        <!-- Mobile menu elements -->
        <div class="mobile-menu-overlay"></div>
        <button class="mobile-menu-button" aria-label="Toggle navigation menu">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </button>

        <main class="content" role="main">
            <div class="city-page state-page">

                <h1>Find a Group by Location</h1>

                <!-- Title search container will be inserted here by title-search.js -->
                <div id="location-search-section" class="title-search-wrapper"></div>

                <h2>Or select a state to get started:</h2>

                <div id="states-list-container" class="states-list" data-populated="true">
                    <a href="/alabama" class="nav-link-base location-link state-link">Alabama</a>
                    <a href="/alaska" class="nav-link-base location-link state-link">Alaska</a>
                    <a href="/arizona" class="nav-link-base location-link state-link">Arizona</a>
                    <a href="/arkansas" class="nav-link-base location-link state-link">Arkansas</a>
                    <a href="/california" class="nav-link-base location-link state-link">California</a>
                    <a href="/colorado" class="nav-link-base location-link state-link">Colorado</a>
                    <a href="/connecticut" class="nav-link-base location-link state-link">Connecticut</a>
                    <a href="/delaware" class="nav-link-base location-link state-link">Delaware</a>
                    <a href="/washington-dc" class="nav-link-base location-link state-link">District of Columbia</a>
                    <a href="/florida" class="nav-link-base location-link state-link">Florida</a>
                    <a href="/georgia" class="nav-link-base location-link state-link">Georgia</a>
                    <a href="/hawaii" class="nav-link-base location-link state-link">Hawaii</a>
                    <a href="/idaho" class="nav-link-base location-link state-link">Idaho</a>
                    <a href="/illinois" class="nav-link-base location-link state-link">Illinois</a>
                    <a href="/indiana" class="nav-link-base location-link state-link">Indiana</a>
                    <a href="/iowa" class="nav-link-base location-link state-link">Iowa</a>
                    <a href="/kansas" class="nav-link-base location-link state-link">Kansas</a>
                    <a href="/kentucky" class="nav-link-base location-link state-link">Kentucky</a>
                    <a href="/louisiana" class="nav-link-base location-link state-link">Louisiana</a>
                    <a href="/maine" class="nav-link-base location-link state-link">Maine</a>
                    <a href="/maryland" class="nav-link-base location-link state-link">Maryland</a>
                    <a href="/massachusetts" class="nav-link-base location-link state-link">Massachusetts</a>
                    <a href="/michigan" class="nav-link-base location-link state-link">Michigan</a>
                    <a href="/minnesota" class="nav-link-base location-link state-link">Minnesota</a>
                    <a href="/mississippi" class="nav-link-base location-link state-link">Mississippi</a>
                    <a href="/missouri" class="nav-link-base location-link state-link">Missouri</a>
                    <a href="/montana" class="nav-link-base location-link state-link">Montana</a>
                    <a href="/nebraska" class="nav-link-base location-link state-link">Nebraska</a>
                    <a href="/nevada" class="nav-link-base location-link state-link">Nevada</a>
                    <a href="/new-hampshire" class="nav-link-base location-link state-link">New Hampshire</a>
                    <a href="/new-jersey" class="nav-link-base location-link state-link">New Jersey</a>
                    <a href="/new-mexico" class="nav-link-base location-link state-link">New Mexico</a>
                    <a href="/new-york" class="nav-link-base location-link state-link">New York</a>
                    <a href="/north-carolina" class="nav-link-base location-link state-link">North Carolina</a>
                    <a href="/north-dakota" class="nav-link-base location-link state-link">North Dakota</a>
                    <a href="/ohio" class="nav-link-base location-link state-link">Ohio</a>
                    <a href="/oklahoma" class="nav-link-base location-link state-link">Oklahoma</a>
                    <a href="/oregon" class="nav-link-base location-link state-link">Oregon</a>
                    <a href="/pennsylvania" class="nav-link-base location-link state-link">Pennsylvania</a>
                    <a href="/rhode-island" class="nav-link-base location-link state-link">Rhode Island</a>
                    <a href="/south-carolina" class="nav-link-base location-link state-link">South Carolina</a>
                    <a href="/south-dakota" class="nav-link-base location-link state-link">South Dakota</a>
                    <a href="/tennessee" class="nav-link-base location-link state-link">Tennessee</a>
                    <a href="/texas" class="nav-link-base location-link state-link">Texas</a>
                    <a href="/utah" class="nav-link-base location-link state-link">Utah</a>
                    <a href="/vermont" class="nav-link-base location-link state-link">Vermont</a>
                    <a href="/virginia" class="nav-link-base location-link state-link">Virginia</a>
                    <a href="/washington" class="nav-link-base location-link state-link">Washington</a>
                    <a href="/west-virginia" class="nav-link-base location-link state-link">West Virginia</a>
                    <a href="/wisconsin" class="nav-link-base location-link state-link">Wisconsin</a>
                    <a href="/wyoming" class="nav-link-base location-link state-link">Wyoming</a>
                </div>
            </div>
        </main>
    </div>

    <script src="/js/analytics.js" type="module" async=""></script>
</body>

</html>
